!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):"object"==typeof exports?exports.ReactInputMask=e(require("react")):t.ReactInputMask=e(t.React)}(this,function(t){return function(t){function e(i){if(s[i])return s[i].exports;var a=s[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var s={};return e.m=t,e.c=s,e.oe=function(t){throw t},e.p="/",e(e.s=2)}([function(t,e,s){"use strict";function i(t,e){var s={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=t[i]);return s}var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i])}return t},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},r=s(1),o=r.createClass({displayName:"InputElement",defaultCharsRules:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},defaultMaskChar:"_",optionalIndex:-1,lastCaretPos:null,isAndroidBrowser:function(){var t=new RegExp("windows","i"),e=new RegExp("firefox","i"),s=new RegExp("android","i"),i=navigator.userAgent;return!t.test(i)&&!e.test(i)&&s.test(i)},isWindowsPhoneBrowser:function(){var t=new RegExp("windows","i"),e=new RegExp("phone","i"),s=navigator.userAgent;return t.test(s)&&e.test(s)},isAndroidFirefox:function(){var t=new RegExp("windows","i"),e=new RegExp("firefox","i"),s=new RegExp("android","i"),i=navigator.userAgent;return!t.test(i)&&e.test(i)&&s.test(i)},isDOMElement:function(t){return"object"===("undefined"==typeof HTMLElement?"undefined":n(HTMLElement))?t instanceof HTMLElement:1===t.nodeType&&"string"==typeof t.nodeName},getInputDOMNode:function(){var t=this.refs.input;return t?this.isDOMElement(t)?t:t.getDOMNode():null},enableValueAccessors:function(){var t=this,e=!!(Object.getOwnPropertyDescriptor&&Object.getPrototypeOf&&Object.defineProperty);if(e){var s=this.getInputDOMNode();this.valueDescriptor=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(s),"value"),Object.defineProperty(s,"value",{configurable:!0,enumerable:!0,get:function(){return t.value},set:function(e){t.value=e,t.valueDescriptor.set.call(s,e)}})}},disableValueAccessors:function(){var t=this.valueDescriptor;if(t){this.valueDescriptor=null;var e=this.getInputDOMNode();Object.defineProperty(e,"value",t)}},getInputValue:function(){var t,e=this.getInputDOMNode(),s=this.valueDescriptor;return t=s?s.get.call(e):e.value},getPrefix:function(){for(var t="",e=this.mask,s=0;s<e.length&&this.isPermanentChar(s);++s)t+=e[s];return t},getFilledLength:function(){var t,e=arguments.length<=0||void 0===arguments[0]?this.state.value:arguments[0],s=this.maskChar;if(!s)return e.length;for(t=e.length-1;t>=0;--t){var i=e[t];if(!this.isPermanentChar(t)&&this.isAllowedChar(i,t))break}return++t||this.getPrefix().length},getLeftEditablePos:function(t){for(var e=t;e>=0;--e)if(!this.isPermanentChar(e))return e;return null},getRightEditablePos:function(t){for(var e=this.mask,s=t;s<e.length;++s)if(!this.isPermanentChar(s))return s;return null},isEmpty:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?this.state.value:arguments[0];return!e.split("").some(function(e,s){return!t.isPermanentChar(s)&&t.isAllowedChar(e,s)})},isFilled:function(){var t=arguments.length<=0||void 0===arguments[0]?this.state.value:arguments[0];return this.getFilledLength(t)===this.mask.length},createFilledArray:function(t,e){for(var s=[],i=0;t>i;i++)s[i]=e;return s},formatValue:function(t){var e=this,s=this.maskChar,i=this.mask;if(!s){var a=this.getPrefix(),n=a.length;for(t=this.insertRawSubstr("",t,0);t.length>n&&this.isPermanentChar(t.length-1);)t=t.slice(0,t.length-1);return t.length<n&&(t=a),t}if(t){var r=this.formatValue("");return this.insertRawSubstr(r,t,0)}return t.split("").concat(this.createFilledArray(i.length-t.length,null)).map(function(t,a){return e.isAllowedChar(t,a)?t:e.isPermanentChar(a)?i[a]:s}).join("")},clearRange:function(t,e,s){var i=this,a=e+s,n=this.maskChar,r=this.mask;if(!n){var o=this.getPrefix().length;return t=t.split("").filter(function(t,s){return o>s||e>s||s>=a}).join(""),this.formatValue(t)}return t.split("").map(function(t,s){return e>s||s>=a?t:i.isPermanentChar(s)?r[s]:n}).join("")},replaceSubstr:function(t,e,s){return t.slice(0,s)+e+t.slice(s+e.length)},insertRawSubstr:function(t,e,s){var i=this.mask,a=this.maskChar,n=this.isFilled(t),r=this.getPrefix().length;e=e.split(""),!a&&s>t.length&&(t+=i.slice(t.length,s));for(var o=s;o<i.length&&e.length;){var h=this.isPermanentChar(o);if(h&&i[o]!==e[0])!a&&o>=t.length?t+=i[o]:a&&h&&e[0]===a&&e.shift(),++o;else{var l=e.shift();this.isAllowedChar(l,o,!0)&&(o<t.length?t=a||n||r>o?this.replaceSubstr(t,l,o):this.formatValue(t.substr(0,o)+l+t.substr(o)):a||(t+=l),++o)}}return t},getRawSubstrLength:function(t,e,s){var i=this.mask;this.maskChar,e=e.split("");for(var a=s;a<i.length&&e.length;)if(this.isPermanentChar(a)&&i[a]!==e[0])++a;else{var n=e.shift();this.isAllowedChar(n,a,!0)&&++a}return a-s},isAllowedChar:function(t,e){var s=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],i=this.mask,a=this.maskChar;if(this.isPermanentChar(e))return i[e]===t;var n=i[e],r=this.charsRules[n];return new RegExp(r).test(t||"")||s&&t===a},isPermanentChar:function(t){return-1!==this.permanents.indexOf(t)},setCaretToEnd:function(){var t=this.getFilledLength(),e=this.getRightEditablePos(t);null!==e&&this.setCaretPos(e)},setSelection:function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],s=this.getInputDOMNode();if(s){var i=t+e;if("selectionStart"in s&&"selectionEnd"in s)s.selectionStart=t,s.selectionEnd=i;else{var a=s.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",i-t),a.select()}}},getSelection:function(){var t=this.getInputDOMNode(),e=0,s=0;if("selectionStart"in t&&"selectionEnd"in t)e=t.selectionStart,s=t.selectionEnd;else{var i=document.selection.createRange();i.parentElement()===t&&(e=-i.moveStart("character",-t.value.length),s=-i.moveEnd("character",-t.value.length))}return{start:e,end:s,length:s-e}},getCaretPos:function(){return this.getSelection().start},setCaretPos:function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,0)},s=this.setSelection.bind(this,t,0);s(),e(s),this.lastCaretPos=t},isFocused:function(){return document.activeElement===this.getInputDOMNode()},parseMask:function(t){var e=this;if(!t||"string"!=typeof t)return{mask:null,lastEditablePos:null,permanents:[]};var s="",i=[],a=!1,n=null;return t.split("").forEach(function(t){a||"\\"!==t?(a||!e.charsRules[t]?i.push(s.length):n=s.length,s+=t,a=!1):a=!0}),{mask:s,lastEditablePos:n,permanents:i}},getStringValue:function(t){return t||0===t?t+"":""},getInitialState:function(){this.hasValue=null!=this.props.value,this.optionalIndex=this.props.mask.indexOf("?"),this.charsRules="formatChars"in this.props?this.props.formatChars:this.defaultCharsRules;var t=this.parseMask(this.props.mask.replace("?","")),e=null!=this.props.defaultValue?this.props.defaultValue:"",s=null!=this.props.value?this.props.value:e;return s=this.getStringValue(s),this.mask=t.mask,this.permanents=t.permanents,this.lastEditablePos=t.lastEditablePos,this.maskChar="maskChar"in this.props?this.props.maskChar:this.defaultMaskChar,this.mask&&(this.props.alwaysShowMask||s)&&(s=this.formatValue(s)),{value:s}},componentWillMount:function(){var t=this.mask,e=this.state.value;t&&e&&this.setState({value:e})},componentWillReceiveProps:function(t){this.hasValue=null!=this.props.value,this.charsRules="formatChars"in t?t.formatChars:this.defaultCharsRules,this.optionalIndex=this.props.mask.indexOf("?");var e=this.mask,s=this.parseMask(t.mask.replace("?","")),i=s.mask&&s.mask!==this.mask;if(this.mask=s.mask,this.permanents=s.permanents,this.lastEditablePos=s.lastEditablePos,this.maskChar="maskChar"in t?t.maskChar:this.defaultMaskChar,this.mask){var a=null!=t.value?this.getStringValue(t.value):this.state.value;e||null!=t.value||(a=this.getInputDOMNode().value);var n=t.alwaysShowMask||this.isFocused();if((i||s.mask&&(a||n&&!this.hasValue))&&(a=this.formatValue(a),i)){var r=this.lastCaretPos,o=this.getFilledLength(a);r>o&&this.setCaretPos(this.getRightEditablePos(o))}s.mask&&this.isEmpty(a)&&!n&&!this.hasValue&&(a=""),this.value=a,this.state.value!==a&&this.setState({value:a})}},componentDidUpdate:function(t,e){(this.mask||t.mask)&&null==this.props.value&&this.updateUncontrolledInput()},updateUncontrolledInput:function(){this.getInputDOMNode().value!==this.state.value&&(this.getInputDOMNode().value=this.state.value)},onKeyDown:function(t){var e="function"==typeof this.props.onKeyDown;if(t.ctrlKey||t.metaKey)return void(e&&this.props.onKeyDown(t));var s=this.getCaretPos(),i=this.state.value,a=t.key,n=!1;switch(a){case"Backspace":case"Delete":var r=this.getPrefix().length,o="Delete"===a,h=this.getSelection();if(h.length)i=this.clearRange(i,h.start,h.length);else if(r>s||!o&&s===r)s=r;else{var l=o?this.getRightEditablePos(s):this.getLeftEditablePos(s-1);null!==l&&(i=this.clearRange(i,l,1),s=l)}n=!0}e&&this.props.onKeyDown(t),i!==this.state.value&&(t.target.value=i,this.setState({value:this.hasValue?this.state.value:i}),n=!0,"function"==typeof this.props.onChange&&this.props.onChange(t)),n&&(t.preventDefault(),this.setCaretPos(s))},onKeyPress:function(t){var e=t.key,s="function"==typeof this.props.onKeyPress;if("Enter"===e||t.ctrlKey||t.metaKey)return void(s&&this.props.onKeyPress(t));if(!this.isWindowsPhoneBrowser){var i=this.getCaretPos(),a=this.getSelection(),n=this.state.value,r=this.mask,o=(this.maskChar,this.lastEditablePos),h=(r.length,this.getPrefix().length);if(this.isPermanentChar(i)&&r[i]===e)n=this.insertRawSubstr(n,e,i),++i;else{var l=this.getRightEditablePos(i);null!==l&&this.isAllowedChar(e,l)&&(n=this.clearRange(n,a.start,a.length),n=this.insertRawSubstr(n,e,l),i=l+1)}n!==this.state.value&&(t.target.value=n,this.setState({value:this.hasValue?this.state.value:n}),"function"==typeof this.props.onChange&&this.props.onChange(t)),t.preventDefault(),o>i&&i>h&&(i=this.getRightEditablePos(i)),this.setCaretPos(i)}},onChange:function(t){var e=this,s=this.pasteSelection,i=this.mask,a=this.maskChar,n=this.lastEditablePos,r=t.target,o=this.getInputValue();if(!o&&this.preventEmptyChange)return this.disableValueAccessors(),this.preventEmptyChange=!1,void(r.value=this.state.value);var h=this.state.value;if(s)return this.pasteSelection=null,void this.pasteText(h,o,s,t);var l,u=this.getSelection(),p=u.end,f=i.length,c=o.length,g=h.length,d=this.getPrefix().length;if(c>g){var v=c-g,m=u.end-v,C=o.substr(m,v);p=f>m&&(1!==v||C!==i[m])?this.getRightEditablePos(m):m,o=o.substr(0,m)+o.substr(m+v),l=this.clearRange(o,m,f-m),l=this.insertRawSubstr(l,C,p),o=this.insertRawSubstr(h,C,p),1!==v||p>=d&&n>p?p=this.getFilledLength(l):n>p&&p++}else if(g>c){var b=f-c;l=this.clearRange(h,u.end,b);var w=o.substr(0,u.end),k=w===h.substr(0,u.end);a&&(o=this.insertRawSubstr(l,w,0)),l=this.clearRange(l,u.end,f-u.end),l=this.insertRawSubstr(l,w,0),k?d>p&&(p=d):p=this.getFilledLength(l)}o=this.formatValue(o),this.isAndroidBrowser||this.isWindowsPhoneBrowser||(r.value=o,o&&!this.getInputValue()&&(this.isAndroidFirefox&&(this.value=o,this.enableValueAccessors()),this.preventEmptyChange=!0,setTimeout(function(){e.preventEmptyChange=!1,e.disableValueAccessors()},0))),this.setState({value:this.hasValue?this.state.value:o}),"function"==typeof this.props.onChange&&this.props.onChange(t),this.setCaretPos(p)},onFocus:function(t){if(this.state.value){if(this.getFilledLength()<this.mask.length)if(-1!==this.optionalIndex){var e=this.state.value.substr(0,this.getFilledLength()),s=this.mask.substring(this.getFilledLength()).replace(/[a9\*]/g,this.maskChar);this.setState({value:e+s},this.setCaretToEnd)}else this.setCaretToEnd()}else{var i=this.getPrefix(),a=this.formatValue(i);t.target.value=this.formatValue(a),this.setState({value:this.hasValue?this.state.value:a},this.setCaretToEnd),"function"==typeof this.props.onChange&&this.props.onChange(t)}"function"==typeof this.props.onFocus&&this.props.onFocus(t)},onBlur:function(t){var e=function(){t.target.value="",this.setState({value:this.hasValue?this.state.value:""}),"function"==typeof this.props.onChange&&this.props.onChange(t)}.bind(this),s=-1===this.optionalIndex?this.state.value:this.state.value.substring(0,this.optionalIndex),i=-1===this.optionalIndex?"":this.state.value.substring(this.optionalIndex);if(-1===s.indexOf(this.maskChar)){if(""!==i){var a=this.mask.substring(this.optionalIndex).replace(/[a9\*]/g,this.maskChar);if(a===i)t.target.value=s;else{var n=i.indexOf(this.maskChar);i=-1===n?i:i.substr(0,n),t.target.value=s+i}this.setState({value:t.target.value}),"function"==typeof this.props.onChange&&this.props.onChange(t)}"function"==typeof this.props.onBlur&&this.props.onBlur(t)}else e()},onPaste:function(t){if(this.isAndroidBrowser)return this.pasteSelection=this.getSelection(),void(t.target.value="");var e;if(window.clipboardData&&window.clipboardData.getData?e=window.clipboardData.getData("Text"):t.clipboardData&&t.clipboardData.getData&&(e=t.clipboardData.getData("text/plain")),e){var s=this.state.value,i=this.getSelection();this.pasteText(s,e,i,t)}t.preventDefault()},pasteText:function(t,e,s,i){var a=s.start;s.length&&(t=this.clearRange(t,a,s.length));var n=this.getRawSubstrLength(t,e,a);t=this.insertRawSubstr(t,e,a),a+=n,a=this.getRightEditablePos(a)||a,t!==this.getInputDOMNode().value&&(i&&(i.target.value=t),this.setState({value:this.hasValue?this.state.value:t}),i&&"function"==typeof this.props.onChange&&this.props.onChange(i)),this.setCaretPos(a)},componentDidMount:function(){this.isAndroidBrowser=this.isAndroidBrowser(),this.isWindowsPhoneBrowser=this.isWindowsPhoneBrowser(),this.isAndroidFirefox=this.isAndroidFirefox(),this.mask&&null==this.props.value&&this.updateUncontrolledInput()},render:function(){var t=this,e=this.props,s=(e.mask,e.alwaysShowMask,e.maskChar,e.formatChars,i(e,["mask","alwaysShowMask","maskChar","formatChars"]));if(this.mask){var n=["onFocus","onBlur","onChange","onKeyDown","onKeyPress","onPaste"];n.forEach(function(e){s[e]=t[e]}),null!=s.value&&(s.value=this.state.value)}return r.createElement("input",a({ref:"input"},s))}});t.exports=o},function(e,s){e.exports=t},function(t,e,s){t.exports=s(0)}])});